Status: active
Owner: platform
Last Reviewed: 2026-02-21
Depends On: PLAN.md, docs/features/README.md
Supersedes: none

# Plan Dependency Matrix

This matrix proves that every planned implementation task depends only on capabilities delivered by earlier tasks/waves.

Rule: no task acceptance criterion may require a capability that is first delivered in a later wave.

## Wave 0

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W0-T1 install-bootstrap | runnable module/runtime skeleton | none | PASS |
| W0-T2 migrations baseline | runnable module/runtime skeleton | W0-T1 | PASS |
| W0-T3 CI gates | runnable module/runtime skeleton | W0-T1 | PASS |

## Wave 1

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W1-T1 node-provision | module + migration baseline | W0-T1, W0-T2 | PASS |
| W1-T2 auth-session | module/runtime skeleton | W0-T1 | PASS |
| W1-T3 queue locking invariants | node-aware mutation execution path | W1-T1 | PASS |
| W1-T4 baseline audit logging | authenticated mutation entrypoints | W1-T2 | PASS |

## Wave 2

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W2-T1 site-create | queue + auth + locks + audit baseline | MP1 (end of Wave 1) | PASS |
| W2-T2 env-create-clone | site create and environment ownership model | W2-T1 | PASS |
| W2-T3 backups | environment ownership and ids | W2-T2 | PASS |
| W2-T4 health-check/rollback | environment lifecycle hooks | W2-T2 | PASS |

## Wave 3

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W3-T1 deploy-updates | mandatory pre-update backup + health/rollback gates | W2-T3, W2-T4 | PASS |
| W3-T2 env-restore | restore backup source + post-restore safety baseline | W3-T1, W2-T3 | PASS |
| W3-T3 promotion-drift | drift/backup gates + deploy safety baseline | W3-T1, W2-T3 | PASS |

## Wave 4

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W4-T1 domains-and-tls | stable lifecycle/restore/promotion baseline | MP2 (end of Wave 3) | PASS |
| W4-T2 cache-controls | stable lifecycle/restore/promotion baseline | MP2 (end of Wave 3) | PASS |
| W4-T3 magic-login | environment records + active-state checks | W2-T2 | PASS |
| W4-T4 site-import | import + rewrite + health-gated platform baseline | MP2 (end of Wave 3) | PASS |
| W4-T5 settings-domain-config | domain/tls runtime behavior contract | W4-T1 | PASS |

## Wave 5

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W5-T1 jobs-and-metrics | jobs generated by lifecycle features | W2-T1 | PASS |
| W5-T3 backup-retention-cleanup | backup record production | W2-T3 | PASS |
| W5-T4 job-control | observable job/resource states for control operations | W5-T1 | PASS |

## Wave 6

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W6-T1 web-dashboard-bootstrap | stable authenticated API contract + OpenAPI authority | MP3 (end of Wave 5) | PASS |
| W6-T2 web-auth-and-shell | typed web API client and Nuxt app baseline | W6-T1 | PASS |
| W6-T3 web-embed-and-delivery | built dashboard artifact + authenticated shell routes | W6-T1, W6-T2 | PASS |

## Wave 7

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W7-T1 web-sites-and-environments | embedded dashboard foundation + auth/session shell | MP4 (end of Wave 6) | PASS |
| W7-T2 web-lifecycle-workflows | sites/environment navigation and detail context | W7-T1 | PASS |
| W7-T3 web-operations-workflows | sites/environment navigation and detail context | W7-T1 | PASS |
| W7-T4 web-jobs-metrics-controls | lifecycle and operations workflow surfaces | W7-T2, W7-T3 | PASS |

## Wave 8

| Task | Capability Required by AC | Provider Task(s) | Forward Dependency Check |
|---|---|---|---|
| W8-T1 web-dashboard-hardening gates | workflow-complete dashboard surfaces | MP5 (end of Wave 7) | PASS |
| W8-T2 web-dashboard-hardening UX/accessibility | deterministic frontend gates and CI enforcement | W8-T1 | PASS |
| W8-T3 MVP release readiness pass | hardened dashboard + embedded delivery + CI gates | W8-T2 | PASS |

## Known Explicit Non-Dependencies

- Clone expiration metadata is removed from MVP ACs and therefore does not require schema additions in this plan.
- Internal settings surface (`/_admin/settings/*`) is intentionally excluded from public OpenAPI and does not block public API wave execution.
